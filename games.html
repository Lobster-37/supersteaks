<!-- ...existing code above... -->

    <script>
      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyCaqMFsLv72_lhsbue7IWZSQsndY-o8QpU",
        authDomain: "super-steaks.firebaseapp.com",
        projectId: "super-steaks",
        storageBucket: "super-steaks.firebasestorage.app",
        messagingSenderId: "738316680653",
        appId: "1:738316680653:web:7671710f073edbe22b5884",
        measurementId: "G-JB93BZSFW3"
      };

      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      firebase.analytics();

      // Updated teams for assignment
      const teams = [
        "Paris Saint-Germain",
        "Tottenham Hotspur",
        "Liverpool",
        "Arsenal",
        "Manchester City",
        "Chelsea",
        "Newcastle United",
        "Napoli",
        "Inter Milan",
        "Atalanta",
        "Juventus",
        "Barcelona",
        "Real Madrid",
        "Atlético Madrid",
        "Athletic Club",
        "Villarreal",
        "Bayern Munich",
        "Bayer Leverkusen",
        "Eintracht Frankfurt",
        "Borussia Dortmund",
        "Marseille",
        "Monaco",
        "PSV Eindhoven",
        "Ajax",
        "Sporting CP",
        "Union Saint-Gilloise",
        "Galatasaray",
        "Slavia Prague",
        "Olympiacos",
        "Benfica",
        "Club Brugge",
        "Qarabağ",
        "Bodø/Glimt",
        "Copenhagen",
        "Pafos FC",
        "Kairat Almaty"
      ];
      const currentDrawId = 'champleague25/26';

      // DOM elements
      const loadingSpinner = document.getElementById('loading-spinner');
      const appContent = document.getElementById('app-content');
      const assignedTeamEl = document.getElementById('assigned-team');
      const enterButton = document.getElementById('enter-button');
      const messageArea = document.getElementById('message-area');
      const userIdDisplay = document.getElementById('user-id-display');

      let userId = null;
      let db = null;

      window.onload = function() {
        loadingSpinner.classList.remove('hidden');
        appContent.classList.add('hidden');

        db = firebase.firestore();

        firebase.auth().signInAnonymously()
          .then((result) => {
            userId = result.user.uid;
            userIdDisplay.textContent = userId;

            const entryRef = db.collection('users').doc(userId).collection('draw_entries').doc(currentDrawId);

            entryRef.onSnapshot((doc) => {
              loadingSpinner.classList.add('hidden');
              appContent.classList.remove('hidden');

              if (doc.exists) {
                const entry = doc.data();
                assignedTeamEl.textContent = entry.assignedTeam;
                assignedTeamEl.classList.add('text-green-600');
                enterButton.disabled = true;
                enterButton.textContent = 'Already Entered!';
                enterButton.classList.remove('bg-yellow-500', 'hover:bg-yellow-400');
                enterButton.classList.add('bg-gray-400', 'cursor-not-allowed');
                messageArea.textContent = `You are cheering for ${entry.assignedTeam}! Good luck!`;
                messageArea.classList.remove('text-red-600', 'text-indigo-600');
                messageArea.classList.add('text-green-600');
              } else {
                assignedTeamEl.textContent = 'Awaiting Entry...';
                assignedTeamEl.classList.remove('text-green-600');
                enterButton.disabled = false;
                enterButton.textContent = 'Enter Draw Now!';
                enterButton.classList.add('bg-yellow-500', 'hover:bg-yellow-400');
                enterButton.classList.remove('bg-gray-400', 'cursor-not-allowed');
                messageArea.textContent = 'Click the button to get your random team!';
                messageArea.classList.remove('text-green-600', 'text-red-600');
                messageArea.classList.add('text-indigo-600');
              }
            });
          })
          .catch((error) => {
            loadingSpinner.classList.add('hidden');
            appContent.classList.remove('hidden');
            assignedTeamEl.textContent = 'Error loading user.';
            messageArea.textContent = 'Could not sign in. Please refresh.';
            messageArea.classList.add('text-red-600');
            userIdDisplay.textContent = 'Unavailable';
          });
      };

      window.enterDraw = function() {
        if (!userId || !db) {
          messageArea.textContent = 'App not fully loaded. Please wait.';
          messageArea.classList.add('text-red-600');
          return;
        }

        enterButton.disabled = true;
        enterButton.textContent = 'Drawing Team...';
        messageArea.textContent = 'Processing your entry...';
        messageArea.classList.remove('text-red-600', 'text-green-600');
        messageArea.classList.add('text-indigo-600');

        const assignedTeam = teams[Math.floor(Math.random() * teams.length)];

        const entryRef = db.collection('users').doc(userId).collection('draw_entries').doc(currentDrawId);

        entryRef.set({
          drawId: currentDrawId,
          userId: userId,
          assignedTeam: assignedTeam,
          entryTimestamp: new Date().toISOString()
        })
        .then(() => {
          // Success handled by onSnapshot
        })
        .catch((error) => {
          messageArea.textContent = 'Entry failed. Please try again.';
          messageArea.classList.remove('text-indigo-600', 'text-green-600');
          messageArea.classList.add('text-red-600');
          enterButton.disabled = false;
          enterButton.textContent = 'Enter Draw Now!';
        });
      };
    </script>
<!-- ...existing code below... -->
</body>
</html>
